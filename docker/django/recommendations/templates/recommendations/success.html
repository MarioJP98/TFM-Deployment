<h1>Recomendaci√≥n enviada</h1>
<p>Esperando recomendaciones para <strong>{{ features.track_name }}</strong>...</p>

<div id="results"></div>

<script>
  const recommendationId = "{{ recommendation_id }}";
  const resultsDiv = document.getElementById("results");

  async function fetchResults() {
    const response = await fetch(`/results/${recommendationId}/`);
    const data = await response.json();

    if (data.recommendations.length > 0) {
      resultsDiv.innerHTML = "<h3>Recomendaciones:</h3><ul>" +
        data.recommendations.map(r => `<li>${r.artist} - ${r.title}</li>`).join('') +
        "</ul>";
    } else {
      setTimeout(fetchResults, 3000);  // Vuelve a intentar
    }
  }

  fetchResults();
</script>
